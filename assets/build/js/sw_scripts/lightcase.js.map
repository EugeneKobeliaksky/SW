{"version":3,"file":"lightcase.js","sources":["sw_scripts/lightcase.js"],"sourcesContent":["/*\r\n * Lightcase - jQuery Plugin\r\n * The smart and flexible Lightbox Plugin.\r\n *\r\n * @author\t\tCornel Boppart <cornel@bopp-art.com>\r\n * @copyright\tAuthor\r\n *\r\n * @version\t\t2.5.0 (11/03/2018)\r\n */\r\n\r\n;(function ($) {\r\n\r\n\t'use strict';\r\n\r\n\tvar _self = {\r\n\t\tcache: {},\r\n\r\n\t\tsupport: {},\r\n\r\n\t\tobjects: {},\r\n\r\n\t\t/**\r\n\t\t * Initializes the plugin\r\n\t\t *\r\n\t\t * @param\t{object}\toptions\r\n\t\t * @return\t{object}\r\n\t\t */\r\n\t\tinit: function (options) {\r\n\t\t\treturn this.each(function () {\r\n\t\t\t\t$(this).unbind('click.lightcase').bind('click.lightcase', function (event) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t$(this).lightcase('start', options);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Starts the plugin\r\n\t\t *\r\n\t\t * @param\t{object}\toptions\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\tstart: function (options) {\r\n\t\t\t_self.origin = lightcase.origin = this;\r\n\r\n\t\t\t_self.settings = lightcase.settings = $.extend(true, {\r\n\t\t\t\tidPrefix: 'lightcase-',\r\n\t\t\t\tclassPrefix: 'lightcase-',\r\n\t\t\t\tattrPrefix: 'lc-',\r\n\t\t\t\ttransition: 'elastic',\r\n\t\t\t\ttransitionOpen: null,\r\n\t\t\t\ttransitionClose: null,\r\n\t\t\t\ttransitionIn: null,\r\n\t\t\t\ttransitionOut: null,\r\n\t\t\t\tcssTransitions: true,\r\n\t\t\t\tspeedIn: 250,\r\n\t\t\t\tspeedOut: 250,\r\n\t\t\t\twidth: null,\r\n\t\t\t\theight: null,\r\n\t\t\t\tmaxWidth: 800,\r\n\t\t\t\tmaxHeight: 500,\r\n\t\t\t\tforceWidth: false,\r\n\t\t\t\tforceHeight: false,\r\n\t\t\t\tliveResize: true,\r\n\t\t\t\tfullScreenModeForMobile: true,\r\n\t\t\t\tmobileMatchExpression: /(iphone|ipod|ipad|android|blackberry|symbian)/,\r\n\t\t\t\tdisableShrink: false,\r\n\t\t\t\tfixedRatio: true,\r\n\t\t\t\tshrinkFactor: .75,\r\n\t\t\t\toverlayOpacity: .9,\r\n\t\t\t\tslideshow: false,\r\n\t\t\t\tslideshowAutoStart: true,\r\n\t\t\t\tbreakBeforeShow: false,\r\n\t\t\t\ttimeout: 5000,\r\n\t\t\t\tswipe: true,\r\n\t\t\t\tuseKeys: true,\r\n\t\t\t\tuseCategories: true,\r\n\t\t\t\tuseAsCollection: false,\r\n\t\t\t\tnavigateEndless: true,\r\n\t\t\t\tcloseOnOverlayClick: true,\r\n\t\t\t\ttitle: null,\r\n\t\t\t\tcaption: null,\r\n\t\t\t\tshowTitle: true,\r\n\t\t\t\tshowCaption: true,\r\n\t\t\t\tshowSequenceInfo: true,\r\n\t\t\t\tinline: {\r\n\t\t\t\t\twidth: 'auto',\r\n\t\t\t\t\theight: 'auto'\r\n\t\t\t\t},\r\n\t\t\t\tajax: {\r\n\t\t\t\t\twidth: 'auto',\r\n\t\t\t\t\theight: 'auto',\r\n\t\t\t\t\ttype: 'get',\r\n\t\t\t\t\tdataType: 'html',\r\n\t\t\t\t\tdata: {}\r\n\t\t\t\t},\r\n\t\t\t\tiframe: {\r\n\t\t\t\t\twidth: 800,\r\n\t\t\t\t\theight: 500,\r\n\t\t\t\t\tframeborder: 0\r\n\t\t\t\t},\r\n\t\t\t\tflash: {\r\n\t\t\t\t\twidth: 400,\r\n\t\t\t\t\theight: 205,\r\n\t\t\t\t\twmode: 'transparent'\r\n\t\t\t\t},\r\n\t\t\t\tvideo: {\r\n\t\t\t\t\twidth: 400,\r\n\t\t\t\t\theight: 225,\r\n\t\t\t\t\tposter: '',\r\n\t\t\t\t\tpreload: 'auto',\r\n\t\t\t\t\tcontrols: true,\r\n\t\t\t\t\tautobuffer: true,\r\n\t\t\t\t\tautoplay: true,\r\n\t\t\t\t\tloop: false\r\n\t\t\t\t},\r\n\t\t\t\tattr: 'data-rel',\r\n\t\t\t\thref: null,\r\n\t\t\t\ttype: null,\r\n\t\t\t\ttypeMapping: {\r\n\t\t\t\t\t'image': 'jpg,jpeg,gif,png,bmp',\r\n\t\t\t\t\t'flash': 'swf',\r\n\t\t\t\t\t'video': 'mp4,mov,ogv,ogg,webm',\r\n\t\t\t\t\t'iframe': 'html,php',\r\n\t\t\t\t\t'ajax': 'json,txt',\r\n\t\t\t\t\t'inline': '#'\r\n\t\t\t\t},\r\n\t\t\t\terrorMessage: function () {\r\n\t\t\t\t\treturn '<p class=\"' + _self.settings.classPrefix + 'error\">' + _self.settings.labels['errorMessage'] + '</p>';\r\n\t\t\t\t},\r\n\t\t\t\tlabels: {\r\n\t\t\t\t\t'errorMessage': 'Source could not be found...',\r\n\t\t\t\t\t'sequenceInfo.of': ' of ',\r\n\t\t\t\t\t'close': 'Close',\r\n\t\t\t\t\t'navigator.prev': 'Prev',\r\n\t\t\t\t\t'navigator.next': 'Next',\r\n \t\t\t\t\t'navigator.play': 'Play',\r\n\t\t\t\t\t'navigator.pause': 'Pause'\r\n\t\t\t\t},\r\n\t\t\t\tmarkup: function () {\r\n\t\t\t\t\t_self.objects.body.append(\r\n\t\t\t\t\t\t_self.objects.overlay = $('<div id=\"' + _self.settings.idPrefix + 'overlay\"></div>'),\r\n\t\t\t\t\t\t_self.objects.loading = $('<div id=\"' + _self.settings.idPrefix + 'loading\" class=\"' + _self.settings.classPrefix + 'icon-spin\"></div>'),\r\n\t\t\t\t\t\t_self.objects.case = $('<div id=\"' + _self.settings.idPrefix + 'case\" aria-hidden=\"true\" role=\"dialog\"></div>')\r\n\t\t\t\t\t);\r\n\t\t\t\t\t_self.objects.case.after(\r\n\t\t\t\t\t\t_self.objects.close = $('<a href=\"#\" class=\"' + _self.settings.classPrefix + 'icon-close\"><span>' + _self.settings.labels['close'] + '</span></a>'),\r\n\t\t\t\t\t\t_self.objects.nav = $('<div id=\"' + _self.settings.idPrefix + 'nav\"></div>')\r\n\t\t\t\t\t);\r\n\t\t\t\t\t_self.objects.nav.append(\r\n\t\t\t\t\t\t_self.objects.prev = $('<a href=\"#\" class=\"' + _self.settings.classPrefix + 'icon-prev\"><span>' + _self.settings.labels['navigator.prev'] + '</span></a>').hide(),\r\n\t\t\t\t\t\t_self.objects.next = $('<a href=\"#\" class=\"' + _self.settings.classPrefix + 'icon-next\"><span>' + _self.settings.labels['navigator.next'] + '</span></a>').hide(),\r\n\t\t\t\t\t\t_self.objects.play = $('<a href=\"#\" class=\"' + _self.settings.classPrefix + 'icon-play\"><span>' + _self.settings.labels['navigator.play'] + '</span></a>').hide(),\r\n\t\t\t\t\t\t_self.objects.pause = $('<a href=\"#\" class=\"' + _self.settings.classPrefix + 'icon-pause\"><span>' + _self.settings.labels['navigator.pause'] + '</span></a>').hide()\r\n\t\t\t\t\t);\r\n\t\t\t\t\t_self.objects.case.append(\r\n\t\t\t\t\t\t_self.objects.content = $('<div id=\"' + _self.settings.idPrefix + 'content\"></div>'),\r\n\t\t\t\t\t\t_self.objects.info = $('<div id=\"' + _self.settings.idPrefix + 'info\"></div>')\r\n\t\t\t\t\t);\r\n\t\t\t\t\t_self.objects.content.append(\r\n\t\t\t\t\t\t_self.objects.contentInner = $('<div class=\"' + _self.settings.classPrefix + 'contentInner\"></div>')\r\n\t\t\t\t\t);\r\n\t\t\t\t\t_self.objects.info.append(\r\n\t\t\t\t\t\t_self.objects.sequenceInfo = $('<div id=\"' + _self.settings.idPrefix + 'sequenceInfo\"></div>'),\r\n\t\t\t\t\t\t_self.objects.title = $('<h4 id=\"' + _self.settings.idPrefix + 'title\"></h4>'),\r\n\t\t\t\t\t\t_self.objects.caption = $('<p id=\"' + _self.settings.idPrefix + 'caption\"></p>')\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\tonInit: {},\r\n\t\t\t\tonStart: {},\r\n\t\t\t\tonBeforeCalculateDimensions: {},\r\n\t\t\t\tonAfterCalculateDimensions: {},\r\n\t\t\t\tonBeforeShow: {},\r\n\t\t\t\tonFinish: {},\r\n\t\t\t\tonResize: {},\r\n\t\t\t\tonClose: {},\r\n\t\t\t\tonCleanup: {}\r\n\t\t\t},\r\n\t\t\toptions,\r\n\t\t\t// Load options from data-lc-options attribute\r\n\t\t\t_self.origin.data ? _self.origin.data('lc-options') : {});\r\n\r\n\t\t\t_self.objects.document = $('html');\r\n\t\t\t_self.objects.body = $('body');\r\n\r\n\t\t\t// Call onInit hook functions\r\n\t\t\t_self._callHooks(_self.settings.onInit);\r\n\r\n\t\t\t_self.objectData = _self._setObjectData(this);\r\n\r\n\t\t\t_self._addElements();\r\n\t\t\t_self._open();\r\n\r\n\t\t\t_self.dimensions = _self.getViewportDimensions();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Getter method for objects\r\n\t\t *\r\n\t\t * @param\t{string}\tname\r\n\t\t * @return\t{object}\r\n\t\t */\r\n\t\tget: function (name) {\r\n\t\t\treturn _self.objects[name];\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Getter method for objectData\r\n\t\t *\r\n\t\t * @return\t{object}\r\n\t\t */\r\n\t\tgetObjectData: function () {\r\n\t\t\treturn _self.objectData;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Sets the object data\r\n\t\t *\r\n\t\t * @param\t{object}\tobject\r\n\t\t * @return\t{object}\tobjectData\r\n\t\t */\r\n\t\t_setObjectData: function (object) {\r\n\t\t \tvar $object = $(object),\r\n\t\t\t\tobjectData = {\r\n\t\t\t\tthis: $(object),\r\n\t\t\t\ttitle: _self.settings.title || $object.attr(_self._prefixAttributeName('title')) || $object.attr('title'),\r\n\t\t\t\tcaption: _self.settings.caption || $object.attr(_self._prefixAttributeName('caption')) || $object.children('img').attr('alt'),\r\n\t\t\t\turl: _self._determineUrl(),\r\n\t\t\t\trequestType: _self.settings.ajax.type,\r\n\t\t\t\trequestData: _self.settings.ajax.data,\r\n\t\t\t\trequestDataType: _self.settings.ajax.dataType,\r\n\t\t\t\trel: $object.attr(_self._determineAttributeSelector()),\r\n\t\t\t\ttype: _self.settings.type || _self._verifyDataType(_self._determineUrl()),\r\n\t\t\t\tisPartOfSequence: _self.settings.useAsCollection || _self._isPartOfSequence($object.attr(_self.settings.attr), ':'),\r\n\t\t\t\tisPartOfSequenceWithSlideshow: _self._isPartOfSequence($object.attr(_self.settings.attr), ':slideshow'),\r\n\t\t\t\tcurrentIndex: $(_self._determineAttributeSelector()).index($object),\r\n\t\t\t\tsequenceLength: $(_self._determineAttributeSelector()).length\r\n\t\t\t};\r\n\r\n\t\t\t// Add sequence info to objectData\r\n\t\t\tobjectData.sequenceInfo = (objectData.currentIndex + 1) + _self.settings.labels['sequenceInfo.of'] + objectData.sequenceLength;\r\n\r\n\t\t\t// Add next/prev index\r\n\t\t\tobjectData.prevIndex = objectData.currentIndex - 1;\r\n\t\t\tobjectData.nextIndex = objectData.currentIndex + 1;\r\n\r\n\t\t\treturn objectData;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Prefixes a data attribute name with defined name from 'settings.attrPrefix'\r\n\t\t * to ensure more uniqueness for all lightcase related/used attributes.\r\n\t\t *\r\n\t\t * @param\t{string}\tname\r\n\t\t * @return\t{string}\r\n\t\t */\r\n\t\t_prefixAttributeName: function (name) {\r\n\t\t\treturn 'data-' + _self.settings.attrPrefix + name;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Determines the link target considering 'settings.href' and data attributes\r\n\t\t * but also with a fallback to the default 'href' value.\r\n\t\t *\r\n\t\t * @return\t{string}\r\n\t\t */\r\n\t\t_determineLinkTarget: function () {\r\n\t\t\treturn _self.settings.href || $(_self.origin).attr(_self._prefixAttributeName('href')) || $(_self.origin).attr('href');\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Determines the attribute selector to use, depending on\r\n\t\t * whether categorized collections are beeing used or not.\r\n\t\t *\r\n\t\t * @return\t{string}\tselector\r\n\t\t */\r\n\t\t_determineAttributeSelector: function () {\r\n\t\t\tvar\t$origin = $(_self.origin),\r\n\t\t\t\tselector = '';\r\n\r\n\t\t\tif (typeof _self.cache.selector !== 'undefined') {\r\n\t\t\t\tselector = _self.cache.selector;\r\n\t\t\t} else if (_self.settings.useCategories === true && $origin.attr(_self._prefixAttributeName('categories'))) {\r\n\t\t\t\tvar\tcategories = $origin.attr(_self._prefixAttributeName('categories')).split(' ');\r\n\r\n\t\t\t\t$.each(categories, function (index, category) {\r\n\t\t\t\t\tif (index > 0) {\r\n\t\t\t\t\t\tselector += ',';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tselector += '[' + _self._prefixAttributeName('categories') + '~=\"' + category + '\"]';\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tselector = '[' + _self.settings.attr + '=\"' + $origin.attr(_self.settings.attr) + '\"]';\r\n\t\t\t}\r\n\r\n\t\t\t_self.cache.selector = selector;\r\n\r\n\t\t\treturn selector;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Determines the correct resource according to the\r\n\t\t * current viewport and density.\r\n\t\t *\r\n\t\t * @return\t{string}\turl\r\n\t\t */\r\n\t\t_determineUrl: function () {\r\n\t\t\tvar\tdataUrl = _self._verifyDataUrl(_self._determineLinkTarget()),\r\n\t\t\t\twidth = 0,\r\n\t\t\t\tdensity = 0,\r\n\t\t\t\tsupportLevel = '',\r\n\t\t\t\turl;\r\n\r\n\t\t\t$.each(dataUrl, function (index, src) {\r\n\t\t\t\tswitch (_self._verifyDataType(src.url)) {\r\n\t\t\t\t\tcase 'video':\r\n\t\t\t\t\t\tvar\tvideo = document.createElement('video'),\r\n\t\t\t\t\t\t\tvideoType = _self._verifyDataType(src.url) + '/' + _self._getFileUrlSuffix(src.url);\r\n\r\n\t\t\t\t\t\t// Check if browser can play this type of video format\r\n\t\t\t\t\t\tif (supportLevel !== 'probably' && supportLevel !== video.canPlayType(videoType) && video.canPlayType(videoType) !== '') {\r\n\t\t\t\t\t\t\tsupportLevel = video.canPlayType(videoType);\r\n\t\t\t\t\t\t\turl = src.url;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t// Check density\r\n\t\t\t\t\t\t\t_self._devicePixelRatio() >= src.density &&\r\n\t\t\t\t\t\t\tsrc.density >= density &&\r\n\t\t\t\t\t\t\t// Check viewport width\r\n\t\t\t\t\t\t\t_self._matchMedia()('screen and (min-width:' + src.width + 'px)').matches &&\r\n\t\t\t\t\t\t\tsrc.width >= width\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\twidth = src.width;\r\n\t\t\t\t\t\t\tdensity = src.density;\r\n\t\t\t\t\t\t\turl = src.url;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn url;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Normalizes an url and returns information about the resource path,\r\n\t\t * the viewport width as well as density if defined.\r\n\t\t *\r\n\t\t * @param\t{string}\turl\tPath to resource in format of an url or srcset\r\n\t\t * @return\t{object}\r\n\t\t */\r\n\t\t_normalizeUrl: function (url) {\r\n\t\t\tvar srcExp = /^\\d+$/;\r\n\r\n\t\t\treturn url.split(',').map(function (str) {\r\n\t\t\t\tvar src = {\r\n\t\t\t\t\twidth: 0,\r\n\t\t\t\t\tdensity: 0\r\n\t\t\t\t};\r\n\r\n\t\t\t\tstr.trim().split(/\\s+/).forEach(function (url, i) {\r\n\t\t\t\t\tif (i === 0) {\r\n\t\t\t\t\t\treturn src.url = url;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar value = url.substring(0, url.length - 1),\r\n\t\t\t\t\t\tlastChar = url[url.length - 1],\r\n\t\t\t\t\t\tintVal = parseInt(value, 10),\r\n\t\t\t\t\t\tfloatVal = parseFloat(value);\r\n\t\t\t\t\tif (lastChar === 'w' && srcExp.test(value)) {\r\n\t\t\t\t\t\tsrc.width = intVal;\r\n\t\t\t\t\t} else if (lastChar === 'h' && srcExp.test(value)) {\r\n\t\t\t\t\t\tsrc.height = intVal;\r\n\t\t\t\t\t} else if (lastChar === 'x' && !isNaN(floatVal)) {\r\n\t\t\t\t\t\tsrc.density = floatVal;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn src;\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Verifies if the link is part of a sequence\r\n\t\t *\r\n\t\t * @param\t{string}\trel\r\n\t\t * @param\t{string}\texpression\r\n\t\t * @return\t{boolean}\r\n\t\t */\r\n\t\t_isPartOfSequence: function (rel, expression) {\r\n\t\t\tvar getSimilarLinks = $('[' + _self.settings.attr + '=\"' + rel + '\"]'),\r\n\t\t\t\tregexp = new RegExp(expression);\r\n\r\n\t\t\treturn (regexp.test(rel) && getSimilarLinks.length > 1);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Verifies if the slideshow should be enabled\r\n\t\t *\r\n\t\t * @return\t{boolean}\r\n\t\t */\r\n\t\tisSlideshowEnabled: function () {\r\n\t\t\treturn (_self.objectData.isPartOfSequence && (_self.settings.slideshow === true || _self.objectData.isPartOfSequenceWithSlideshow === true));\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Loads the new content to show\r\n\t\t *\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_loadContent: function () {\r\n\t\t\tif (_self.cache.originalObject) {\r\n\t\t\t\t_self._restoreObject();\r\n\t\t\t}\r\n\r\n\t\t\t_self._createObject();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Creates a new object\r\n\t\t *\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_createObject: function () {\r\n\t\t\tvar $object;\r\n\r\n\t\t\t// Create object\r\n\t\t\tswitch (_self.objectData.type) {\r\n\t\t\t\tcase 'image':\r\n\t\t\t\t\t$object = $(new Image());\r\n\t\t\t\t\t$object.attr({\r\n\t\t\t\t\t\t// The time expression is required to prevent the binding of an image load\r\n\t\t\t\t\t\t'src': _self.objectData.url,\r\n\t\t\t\t\t\t'alt': _self.objectData.title\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'inline':\r\n\t\t\t\t\t$object = $('<div class=\"' + _self.settings.classPrefix + 'inlineWrap\"></div>');\r\n\t\t\t\t\t$object.html(_self._cloneObject($(_self.objectData.url)));\r\n\r\n\t\t\t\t\t// Add custom attributes from _self.settings\r\n\t\t\t\t\t$.each(_self.settings.inline, function (name, value) {\r\n\t\t\t\t\t\t$object.attr(_self._prefixAttributeName(name), value);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ajax':\r\n\t\t\t\t\t$object = $('<div class=\"' + _self.settings.classPrefix + 'inlineWrap\"></div>');\r\n\r\n\t\t\t\t\t// Add custom attributes from _self.settings\r\n\t\t\t\t\t$.each(_self.settings.ajax, function (name, value) {\r\n\t\t\t\t\t\tif (name !== 'data') {\r\n\t\t\t\t\t\t\t$object.attr(_self._prefixAttributeName(name), value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'flash':\r\n\t\t\t\t\t$object = $('<embed src=\"' + _self.objectData.url + '\" type=\"application/x-shockwave-flash\"></embed>');\r\n\r\n\t\t\t\t\t// Add custom attributes from _self.settings\r\n\t\t\t\t\t$.each(_self.settings.flash, function (name, value) {\r\n\t\t\t\t\t\t$object.attr(name, value);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'video':\r\n\t\t\t\t\t$object = $('<video></video>');\r\n\t\t\t\t\t$object.attr('src', _self.objectData.url);\r\n\r\n\t\t\t\t\t// Add custom attributes from _self.settings\r\n\t\t\t\t\t$.each(_self.settings.video, function (name, value) {\r\n\t\t\t\t\t\t$object.attr(name, value);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t$object = $('<iframe></iframe>');\r\n\t\t\t\t\t$object.attr({\r\n\t\t\t\t\t\t'src': _self.objectData.url\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// Add custom attributes from _self.settings\r\n\t\t\t\t\t$.each(_self.settings.iframe, function (name, value) {\r\n\t\t\t\t\t\t$object.attr(name, value);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\t_self._addObject($object);\r\n\t\t\t_self._loadObject($object);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Adds the new object to the markup\r\n\t\t *\r\n\t\t * @param\t{object}\t$object\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_addObject: function ($object) {\r\n\t\t\t// Add object to content holder\r\n\t\t\t_self.objects.contentInner.html($object);\r\n\r\n\t\t\t// Start loading\r\n\t\t\t_self._loading('start');\r\n\r\n\t\t\t// Call onStart hook functions\r\n\t\t\t_self._callHooks(_self.settings.onStart);\r\n\r\n\t\t\t// Add sequenceInfo to the content holder or hide if its empty\r\n\t\t\tif (_self.settings.showSequenceInfo === true && _self.objectData.isPartOfSequence) {\r\n\t\t\t\t_self.objects.sequenceInfo.html(_self.objectData.sequenceInfo);\r\n\t\t\t\t_self.objects.sequenceInfo.show();\r\n\t\t\t} else {\r\n\t\t\t\t_self.objects.sequenceInfo.empty();\r\n\t\t\t\t_self.objects.sequenceInfo.hide();\r\n\t\t\t}\r\n\t\t\t// Add title to the content holder or hide if its empty\r\n\t\t\tif (_self.settings.showTitle === true && _self.objectData.title !== undefined && _self.objectData.title !== '') {\r\n\t\t\t\t_self.objects.title.html(_self.objectData.title);\r\n\t\t\t\t_self.objects.title.show();\r\n\t\t\t} else {\r\n\t\t\t\t_self.objects.title.empty();\r\n\t\t\t\t_self.objects.title.hide();\r\n\t\t\t}\r\n\t\t\t// Add caption to the content holder or hide if its empty\r\n\t\t\tif (_self.settings.showCaption === true && _self.objectData.caption !== undefined && _self.objectData.caption !== '') {\r\n\t\t\t\t_self.objects.caption.html(_self.objectData.caption);\r\n\t\t\t\t_self.objects.caption.show();\r\n\t\t\t} else {\r\n\t\t\t\t_self.objects.caption.empty();\r\n\t\t\t\t_self.objects.caption.hide();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Loads the new object\r\n\t\t *\r\n\t\t * @param\t{object}\t$object\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_loadObject: function ($object) {\r\n\t\t\t// Load the object\r\n\t\t\tswitch (_self.objectData.type) {\r\n\t\t\t\tcase 'inline':\r\n\t\t\t\t\tif ($(_self.objectData.url)) {\r\n\t\t\t\t\t\t_self._showContent($object);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_self.error();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ajax':\r\n\t\t\t\t\t$.ajax(\r\n\t\t\t\t\t\t$.extend({}, _self.settings.ajax, {\r\n\t\t\t\t\t\t\turl: _self.objectData.url,\r\n\t\t\t\t\t\t\ttype: _self.objectData.requestType,\r\n\t\t\t\t\t\t\tdataType: _self.objectData.requestDataType,\r\n\t\t\t\t\t\t\tdata: _self.objectData.requestData,\r\n\t\t\t\t\t\t\tsuccess: function (data, textStatus, jqXHR) {\r\n\t\t\t\t\t\t\t\t// Check for X-Ajax-Location\r\n\t\t\t\t\t\t\t\tif (jqXHR.getResponseHeader('X-Ajax-Location')) {\r\n\t\t\t\t\t\t\t\t\t_self.objectData.url = jqXHR.getResponseHeader('X-Ajax-Location');\r\n\t\t\t\t\t\t\t\t\t_self._loadObject($object);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t// Unserialize if data is transferred as json\r\n\t\t\t\t\t\t\t\t\tif (_self.objectData.requestDataType === 'json') {\r\n\t\t\t\t\t\t\t\t\t\t_self.objectData.data = data;\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t$object.html(data);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t_self._showContent($object);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\terror: function (jqXHR, textStatus, errorThrown) {\r\n\t\t\t\t\t\t\t\t_self.error();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'flash':\r\n\t\t\t\t\t_self._showContent($object);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'video':\r\n\t\t\t\t\tif (typeof($object.get(0).canPlayType) === 'function' || _self.objects.case.find('video').length === 0) {\r\n\t\t\t\t\t\t_self._showContent($object);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_self.error();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif (_self.objectData.url) {\r\n\t\t\t\t\t\t$object.on('load', function () {\r\n\t\t\t\t\t\t\t_self._showContent($object);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$object.on('error', function () {\r\n\t\t\t\t\t\t\t_self.error();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_self.error();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Throws an error message if something went wrong\r\n\t\t *\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\terror: function () {\r\n\t\t\t_self.objectData.type = 'error';\r\n\t\t\tvar $object = $('<div class=\"' + _self.settings.classPrefix + 'inlineWrap\"></div>');\r\n\r\n\t\t\t$object.html(_self.settings.errorMessage);\r\n\t\t\t_self.objects.contentInner.html($object);\r\n\r\n\t\t\t_self._showContent(_self.objects.contentInner);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Calculates the dimensions to fit content\r\n\t\t *\r\n\t\t * @param\t{object}\t$object\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_calculateDimensions: function ($object) {\r\n\t\t\t_self._cleanupDimensions();\r\n\r\n\t\t\tif (!$object) return;\r\n\r\n\t\t\t// Set default dimensions\r\n\t\t\tvar dimensions = {\r\n\t\t\t\tratio: 1,\r\n\t\t\t\tobjectWidth: $object.attr('width') ? $object.attr('width') : $object.attr(_self._prefixAttributeName('width')),\r\n\t\t\t\tobjectHeight: $object.attr('height') ? $object.attr('height') : $object.attr(_self._prefixAttributeName('height'))\r\n\t\t\t};\r\n\r\n\t\t\tif (!_self.settings.disableShrink) {\r\n\t\t\t\t// Add calculated maximum width/height to dimensions\r\n\t\t\t\tdimensions.maxWidth = parseInt(_self.dimensions.windowWidth * _self.settings.shrinkFactor);\r\n\t\t\t\tdimensions.maxHeight = parseInt(_self.dimensions.windowHeight * _self.settings.shrinkFactor);\r\n\r\n\t\t\t\t// If the auto calculated maxWidth/maxHeight greather than the user-defined one, use that.\r\n\t\t\t\tif (dimensions.maxWidth > _self.settings.maxWidth) {\r\n\t\t\t\t\tdimensions.maxWidth = _self.settings.maxWidth;\r\n\t\t\t\t}\r\n\t\t\t\tif (dimensions.maxHeight > _self.settings.maxHeight) {\r\n\t\t\t\t\tdimensions.maxHeight = _self.settings.maxHeight;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Calculate the difference between screen width/height and image width/height\r\n\t\t\t\tdimensions.differenceWidthAsPercent = parseInt(100 / dimensions.maxWidth * dimensions.objectWidth);\r\n\t\t\t\tdimensions.differenceHeightAsPercent = parseInt(100 / dimensions.maxHeight * dimensions.objectHeight);\r\n\r\n\t\t\t\tswitch (_self.objectData.type) {\r\n\t\t\t\t\tcase 'image':\r\n\t\t\t\t\tcase 'flash':\r\n\t\t\t\t\tcase 'video':\r\n\t\t\t\t\tcase 'iframe':\r\n\t\t\t\t\tcase 'ajax':\r\n\t\t\t\t\tcase 'inline':\r\n\t\t\t\t\t\tif (_self.objectData.type === 'image' || _self.settings.fixedRatio === true) {\r\n\t\t\t\t\t\t\tif (dimensions.differenceWidthAsPercent > 100 && dimensions.differenceWidthAsPercent > dimensions.differenceHeightAsPercent) {\r\n\t\t\t\t\t\t\t\tdimensions.objectWidth = dimensions.maxWidth;\r\n\t\t\t\t\t\t\t\tdimensions.objectHeight = parseInt(dimensions.objectHeight / dimensions.differenceWidthAsPercent * 100);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (dimensions.differenceHeightAsPercent > 100 && dimensions.differenceHeightAsPercent > dimensions.differenceWidthAsPercent) {\r\n\t\t\t\t\t\t\t\tdimensions.objectWidth = parseInt(dimensions.objectWidth / dimensions.differenceHeightAsPercent * 100);\r\n\t\t\t\t\t\t\t\tdimensions.objectHeight = dimensions.maxHeight;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (dimensions.differenceHeightAsPercent > 100 && dimensions.differenceWidthAsPercent < dimensions.differenceHeightAsPercent) {\r\n\t\t\t\t\t\t\t\tdimensions.objectWidth = parseInt(dimensions.maxWidth / dimensions.differenceHeightAsPercent * dimensions.differenceWidthAsPercent);\r\n\t\t\t\t\t\t\t\tdimensions.objectHeight = dimensions.maxHeight;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tcase 'error':\r\n\t\t\t\t\t\tif (!isNaN(dimensions.objectWidth) && dimensions.objectWidth > dimensions.maxWidth) {\r\n\t\t\t\t\t\t\tdimensions.objectWidth = dimensions.maxWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tif ((isNaN(dimensions.objectWidth) || dimensions.objectWidth > dimensions.maxWidth) && !_self.settings.forceWidth) {\r\n\t\t\t\t\t\t\tdimensions.objectWidth = dimensions.maxWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (((isNaN(dimensions.objectHeight) && dimensions.objectHeight !== 'auto') || dimensions.objectHeight > dimensions.maxHeight) && !_self.settings.forceHeight) {\r\n\t\t\t\t\t\t\tdimensions.objectHeight = dimensions.maxHeight;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (_self.settings.forceWidth) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tdimensions.objectWidth = _self.settings[_self.objectData.type].width;\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tdimensions.objectWidth = _self.settings.width || dimensions.objectWidth;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdimensions.maxWidth = null;\r\n\t\t\t}\r\n\t\t\tif ($object.attr(_self._prefixAttributeName('max-width'))) {\r\n\t\t\t\tdimensions.maxWidth = $object.attr(_self._prefixAttributeName('max-width'));\r\n\t\t\t}\r\n\r\n\t\t\tif (_self.settings.forceHeight) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tdimensions.objectHeight = _self.settings[_self.objectData.type].height;\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tdimensions.objectHeight = _self.settings.height || dimensions.objectHeight;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdimensions.maxHeight = null;\r\n\t\t\t}\r\n\t\t\tif ($object.attr(_self._prefixAttributeName('max-height'))) {\r\n\t\t\t\tdimensions.maxHeight = $object.attr(_self._prefixAttributeName('max-height'));\r\n\t\t\t}\r\n\t\t\t_self._adjustDimensions($object, dimensions);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Adjusts the dimensions\r\n\t\t *\r\n\t\t * @param\t{object}\t$object\r\n\t\t * @param\t{object}\tdimensions\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_adjustDimensions: function ($object, dimensions) {\r\n\t\t\t// Adjust width and height\r\n\t\t\t$object.css({\r\n\t\t\t\t'width': dimensions.objectWidth,\r\n\t\t\t\t'height': dimensions.objectHeight,\r\n\t\t\t\t'max-width': dimensions.maxWidth,\r\n\t\t\t\t'max-height': dimensions.maxHeight\r\n\t\t\t});\r\n\r\n\t\t\t_self.objects.contentInner.css({\r\n\t\t\t\t'width': $object.outerWidth(),\r\n\t\t\t\t'height': $object.outerHeight(),\r\n\t\t\t\t'max-width': '100%'\r\n\t\t\t});\r\n\r\n\t\t\t_self.objects.case.css({\r\n\t\t\t\t'width': _self.objects.contentInner.outerWidth(),\r\n\t\t\t\t'max-width': '100%'\r\n\t\t\t});\r\n\r\n\t\t\t// Adjust margin\r\n\t\t\t_self.objects.case.css({\r\n\t\t\t\t'margin-top': parseInt(-(_self.objects.case.outerHeight() / 2)),\r\n\t\t\t\t'margin-left': parseInt(-(_self.objects.case.outerWidth() / 2))\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Handles the _loading\r\n\t\t *\r\n\t\t * @param\t{string}\tprocess\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_loading: function (process) {\r\n\t\t\tif (process === 'start') {\r\n\t\t\t\t_self.objects.case.addClass(_self.settings.classPrefix + 'loading');\r\n\t\t\t\t_self.objects.loading.show();\r\n\t\t\t} else if (process === 'end') {\r\n\t\t\t\t_self.objects.case.removeClass(_self.settings.classPrefix + 'loading');\r\n\t\t\t\t_self.objects.loading.hide();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\t/**\r\n\t\t * Gets the client screen dimensions\r\n\t\t *\r\n\t\t * @return\t{object}\tdimensions\r\n\t\t */\r\n\t\tgetViewportDimensions: function () {\r\n\t\t\treturn {\r\n\t\t\t\twindowWidth: $(window).innerWidth(),\r\n\t\t\t\twindowHeight: $(window).innerHeight()\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Verifies the url\r\n\t\t *\r\n\t\t * @param\t{string}\tdataUrl\r\n\t\t * @return\t{object}\tdataUrl\tClean url for processing content\r\n\t\t */\r\n\t\t_verifyDataUrl: function (dataUrl) {\r\n\t\t\tif (!dataUrl || dataUrl === undefined || dataUrl === '') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (dataUrl.indexOf('#') > -1) {\r\n\t\t\t\tdataUrl = dataUrl.split('#');\r\n\t\t\t\tdataUrl = '#' + dataUrl[dataUrl.length - 1];\r\n\t\t\t}\r\n\r\n\t\t\treturn _self._normalizeUrl(dataUrl.toString());\r\n\t\t},\r\n\r\n\t\t\t//\r\n\t\t/**\r\n\t\t * Tries to get the (file) suffix of an url\r\n\t\t *\r\n\t\t * @param\t{string}\turl\r\n\t\t * @return\t{string}\r\n\t\t */\r\n\t\t_getFileUrlSuffix: function (url) {\r\n\t\t\tvar re = /(?:\\.([^.]+))?$/;\r\n\t\t\treturn re.exec(url.toLowerCase())[1];\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Verifies the data type of the content to load\r\n\t\t *\r\n\t\t * @param\t{string}\t\t\turl\r\n\t\t * @return\t{string|boolean}\tArray key if expression matched, else false\r\n\t\t */\r\n\t\t_verifyDataType: function (url) {\r\n\t\t\tvar typeMapping = _self.settings.typeMapping;\r\n\r\n\t\t\t// Early abort if dataUrl couldn't be verified\r\n\t\t\tif (!url) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// Verify the dataType of url according to typeMapping which\r\n\t\t\t// has been defined in settings.\r\n\t\t\tfor (var key in typeMapping) {\r\n\t\t\t\tif (typeMapping.hasOwnProperty(key)) {\r\n\t\t\t\t\tvar suffixArr = typeMapping[key].split(',');\r\n\r\n\t\t\t\t\tfor (var i = 0; i < suffixArr.length; i++) {\r\n\t\t\t\t\t\tvar suffix = suffixArr[i].toLowerCase(),\r\n\t\t\t\t\t\t\tregexp = new RegExp('\\.(' + suffix + ')$', 'i'),\r\n\t\t\t\t\t\t\tstr = url.toLowerCase().split('?')[0].substr(-5);\r\n\r\n\t\t\t\t\t\tif (regexp.test(str) === true || (key === 'inline' && (url.indexOf(suffix) > -1))) {\r\n\t\t\t\t\t\t\treturn key;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// If no expression matched, return 'iframe'.\r\n\t\t\treturn 'iframe';\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Extends html markup with the essential tags\r\n\t\t *\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_addElements: function () {\r\n\t\t\tif (typeof _self.objects.case !== 'undefined' && $('#' + _self.objects.case.attr('id')).length) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t_self.settings.markup();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Shows the loaded content\r\n\t\t *\r\n\t\t * @param\t{object}\t$object\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_showContent: function ($object) {\r\n\t\t\t// Add data attribute with the object type\r\n\t\t\t_self.objects.document.attr(_self._prefixAttributeName('type'), _self.objectData.type);\r\n\r\n\t\t\t_self.cache.object = $object;\r\n\r\n\t\t\t// Call onBeforeShow hook functions\r\n\t\t\t_self._callHooks(_self.settings.onBeforeShow);\r\n\r\n\t\t\tif (_self.settings.breakBeforeShow) return;\r\n\t\t\t_self.show();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Starts the 'inTransition'\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_startInTransition: function () {\r\n\t\t\tswitch (_self.transition.in()) {\r\n\t\t\t\tcase 'scrollTop':\r\n\t\t\t\tcase 'scrollRight':\r\n\t\t\t\tcase 'scrollBottom':\r\n\t\t\t\tcase 'scrollLeft':\r\n\t\t\t\tcase 'scrollHorizontal':\r\n\t\t\t\tcase 'scrollVertical':\r\n\t\t\t\t\t_self.transition.scroll(_self.objects.case, 'in', _self.settings.speedIn);\r\n\t\t\t\t\t_self.transition.fade(_self.objects.contentInner, 'in', _self.settings.speedIn);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'elastic':\r\n\t\t\t\t\tif (_self.objects.case.css('opacity') < 1) {\r\n\t\t\t\t\t\t_self.transition.zoom(_self.objects.case, 'in', _self.settings.speedIn);\r\n\t\t\t\t\t\t_self.transition.fade(_self.objects.contentInner, 'in', _self.settings.speedIn);\r\n\t\t\t\t}\r\n\t\t\t\tcase 'fade':\r\n\t\t\t\tcase 'fadeInline':\r\n\t\t\t\t\t_self.transition.fade(_self.objects.case, 'in', _self.settings.speedIn);\r\n\t\t\t\t\t_self.transition.fade(_self.objects.contentInner, 'in', _self.settings.speedIn);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t_self.transition.fade(_self.objects.case, 'in', 0);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\t// End loading.\r\n\t\t\t_self._loading('end');\r\n\t\t\t_self.isBusy = false;\r\n\r\n\t\t\t// Set index of the first item opened\r\n\t\t\tif (!_self.cache.firstOpened) {\r\n\t\t\t\t_self.cache.firstOpened = _self.objectData.this;\r\n\t\t\t}\r\n\r\n\t\t\t// Fade in the info with delay\r\n\t\t\t_self.objects.info.hide();\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\t _self.transition.fade(_self.objects.info, 'in', _self.settings.speedIn);\r\n\t\t\t}, _self.settings.speedIn);\r\n\r\n\t\t\t// Call onFinish hook functions\r\n\t\t\t_self._callHooks(_self.settings.onFinish);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Processes the content to show\r\n\t\t *\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_processContent: function () {\r\n\t\t\t_self.isBusy = true;\r\n\r\n\t\t\t// Fade out the info at first\r\n\t\t\t_self.transition.fade(_self.objects.info, 'out', 0);\r\n\r\n\t\t\tswitch (_self.settings.transitionOut) {\r\n\t\t\t\tcase 'scrollTop':\r\n\t\t\t\tcase 'scrollRight':\r\n\t\t\t\tcase 'scrollBottom':\r\n\t\t\t\tcase 'scrollLeft':\r\n\t\t\t\tcase 'scrollVertical':\r\n\t\t\t\tcase 'scrollHorizontal':\r\n\t\t\t\t\tif (_self.objects.case.is(':hidden')) {\r\n\t\t\t\t\t\t_self.transition.fade(_self.objects.contentInner, 'out', 0);\r\n\t\t\t\t\t\t_self.transition.fade(_self.objects.case, 'out', 0, 0, function () {\r\n\t\t\t\t\t\t\t_self._loadContent();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_self.transition.scroll(_self.objects.case, 'out', _self.settings.speedOut, function () {\r\n\t\t\t\t\t\t\t_self._loadContent();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'fade':\r\n\t\t\t\t\tif (_self.objects.case.is(':hidden')) {\r\n\t\t\t\t\t\t_self.transition.fade(_self.objects.case, 'out', 0, 0, function () {\r\n\t\t\t\t\t\t\t_self._loadContent();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_self.transition.fade(_self.objects.case, 'out', _self.settings.speedOut, 0, function () {\r\n\t\t\t\t\t\t\t_self._loadContent();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'fadeInline':\r\n\t\t\t\tcase 'elastic':\r\n\t\t\t\t\tif (_self.objects.case.is(':hidden')) {\r\n\t\t\t\t\t\t_self.transition.fade(_self.objects.case, 'out', 0, 0, function () {\r\n\t\t\t\t\t\t\t_self._loadContent();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_self.transition.fade(_self.objects.contentInner, 'out', _self.settings.speedOut, 0, function () {\r\n\t\t\t\t\t\t\t_self._loadContent();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t_self.transition.fade(_self.objects.case, 'out', 0, 0, function () {\r\n\t\t\t\t\t\t_self._loadContent();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Handles events for gallery buttons\r\n\t\t *\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_handleEvents: function () {\r\n\t\t\t_self._unbindEvents();\r\n\r\n\t\t\t_self.objects.nav.children().not(_self.objects.close).hide();\r\n\r\n\t\t\t// If slideshow is enabled, show play/pause and start timeout.\r\n\t\t\tif (_self.isSlideshowEnabled()) {\r\n\t\t\t\t// Only start the timeout if slideshow autostart is enabled and slideshow is not pausing\r\n\t\t\t\tif (\r\n\t\t\t\t\t(_self.settings.slideshowAutoStart === true || _self.isSlideshowStarted) &&\r\n\t\t\t\t\t!_self.objects.nav.hasClass(_self.settings.classPrefix + 'paused')\r\n\t\t\t\t) {\r\n\t\t\t\t\t_self._startTimeout();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_self._stopTimeout();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (_self.settings.liveResize) {\r\n\t\t\t\t_self._watchResizeInteraction();\r\n\t\t\t}\r\n\r\n\t\t\t_self.objects.close.click(function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\t_self.close();\r\n\t\t\t});\r\n\r\n\t\t\tif (_self.settings.closeOnOverlayClick === true) {\r\n\t\t\t\t_self.objects.overlay.css('cursor', 'pointer').click(function (event) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t_self.close();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (_self.settings.useKeys === true) {\r\n\t\t\t\t_self._addKeyEvents();\r\n\t\t\t}\r\n\r\n\t\t\tif (_self.objectData.isPartOfSequence) {\r\n\t\t\t\t_self.objects.nav.attr(_self._prefixAttributeName('ispartofsequence'), true);\r\n\t\t\t\t_self.objects.nav.data('items', _self._setNavigation());\r\n\r\n\t\t\t\t_self.objects.prev.click(function (event) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\tif (_self.settings.navigateEndless === true || !_self.item.isFirst()) {\r\n\t\t\t\t\t\t_self.objects.prev.unbind('click');\r\n\t\t\t\t\t\t_self.cache.action = 'prev';\r\n\t\t\t\t\t\t_self.objects.nav.data('items').prev.click();\r\n\r\n\t\t\t\t\t\tif (_self.isSlideshowEnabled()) {\r\n\t\t\t\t\t\t\t_self._stopTimeout();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t_self.objects.next.click(function (event) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\tif (_self.settings.navigateEndless === true || !_self.item.isLast()) {\r\n\t\t\t\t\t\t_self.objects.next.unbind('click');\r\n\t\t\t\t\t\t_self.cache.action = 'next';\r\n\t\t\t\t\t\t_self.objects.nav.data('items').next.click();\r\n\r\n\t\t\t\t\t\tif (_self.isSlideshowEnabled()) {\r\n\t\t\t\t\t\t\t_self._stopTimeout();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (_self.isSlideshowEnabled()) {\r\n\t\t\t\t\t_self.objects.play.click(function (event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t_self._startTimeout();\r\n\t\t\t\t\t});\r\n\t\t\t\t\t_self.objects.pause.click(function (event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t_self._stopTimeout();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Enable swiping if activated\r\n\t\t\t\tif (_self.settings.swipe === true) {\r\n\t\t\t\t\tif ($.isPlainObject($.event.special.swipeleft)) {\r\n\t\t\t\t\t\t_self.objects.case.on('swipeleft', function (event) {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t_self.objects.next.click();\r\n\t\t\t\t\t\t\tif (_self.isSlideshowEnabled()) {\r\n\t\t\t\t\t\t\t\t_self._stopTimeout();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ($.isPlainObject($.event.special.swiperight)) {\r\n\t\t\t\t\t\t_self.objects.case.on('swiperight', function (event) {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t_self.objects.prev.click();\r\n\t\t\t\t\t\t\tif (_self.isSlideshowEnabled()) {\r\n\t\t\t\t\t\t\t\t_self._stopTimeout();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Adds the key events\r\n\t\t *\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_addKeyEvents: function () {\r\n\t\t\t$(document).bind('keyup.lightcase', function (event) {\r\n\t\t\t\t// Do nothing if lightcase is in process\r\n\t\t\t\tif (_self.isBusy) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch (event.keyCode) {\r\n\t\t\t\t\t// Escape key\r\n\t\t\t\t\tcase 27:\r\n\t\t\t\t\t\t_self.objects.close.click();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t// Backward key\r\n\t\t\t\t\tcase 37:\r\n\t\t\t\t\t\tif (_self.objectData.isPartOfSequence) {\r\n\t\t\t\t\t\t\t_self.objects.prev.click();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t// Forward key\r\n\t\t\t\t\tcase 39:\r\n\t\t\t\t\t\tif (_self.objectData.isPartOfSequence) {\r\n\t\t\t\t\t\t\t_self.objects.next.click();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Starts the slideshow timeout\r\n\t\t *\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_startTimeout: function () {\r\n\t\t\t_self.isSlideshowStarted = true;\r\n\r\n\t\t\t_self.objects.play.hide();\r\n\t\t\t_self.objects.pause.show();\r\n\r\n\t\t\t_self.cache.action = 'next';\r\n\t\t\t_self.objects.nav.removeClass(_self.settings.classPrefix + 'paused');\r\n\r\n\t\t\t_self.timeout = setTimeout(function () {\r\n\t\t\t\t_self.objects.nav.data('items').next.click();\r\n\t\t\t}, _self.settings.timeout);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Stops the slideshow timeout\r\n\t\t *\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_stopTimeout: function () {\r\n\t\t\t_self.objects.play.show();\r\n\t\t\t_self.objects.pause.hide();\r\n\r\n\t\t\t_self.objects.nav.addClass(_self.settings.classPrefix + 'paused');\r\n\r\n\t\t\tclearTimeout(_self.timeout);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Sets the navigator buttons (prev/next)\r\n\t\t *\r\n\t\t * @return\t{object}\titems\r\n\t\t */\r\n\t\t_setNavigation: function () {\r\n\t\t\tvar $links = $((_self.cache.selector || _self.settings.attr)),\r\n\t\t\t\tsequenceLength = _self.objectData.sequenceLength - 1,\r\n\t\t\t\titems = {\r\n\t\t\t\t\tprev: $links.eq(_self.objectData.prevIndex),\r\n\t\t\t\t\tnext: $links.eq(_self.objectData.nextIndex)\r\n\t\t\t\t};\r\n\r\n\t\t\tif (_self.objectData.currentIndex > 0) {\r\n\t\t\t\t_self.objects.prev.show();\r\n\t\t\t} else {\r\n\t\t\t\titems.prevItem = $links.eq(sequenceLength);\r\n\t\t\t}\r\n\t\t\tif (_self.objectData.nextIndex <= sequenceLength) {\r\n\t\t\t\t_self.objects.next.show();\r\n\t\t\t} else {\r\n\t\t\t\titems.next = $links.eq(0);\r\n\t\t\t}\r\n\r\n\t\t\tif (_self.settings.navigateEndless === true) {\r\n\t\t\t\t_self.objects.prev.show();\r\n\t\t\t\t_self.objects.next.show();\r\n\t\t\t}\r\n\r\n\t\t\treturn items;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Item information/status\r\n\t\t *\r\n\t\t */\r\n\t\titem: {\r\n\t\t\t/**\r\n\t\t\t * Verifies if the current item is first item.\r\n\t\t\t *\r\n\t\t\t * @return\t{boolean}\r\n\t\t\t */\r\n\t\t\tisFirst: function () {\r\n\t\t\t\treturn (_self.objectData.currentIndex === 0);\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Verifies if the current item is first item opened.\r\n\t\t\t *\r\n\t\t\t * @return\t{boolean}\r\n\t\t\t */\r\n\t\t\tisFirstOpened: function () {\r\n\t\t\t\treturn _self.objectData.this.is(_self.cache.firstOpened);\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Verifies if the current item is last item.\r\n\t\t\t *\r\n\t\t\t * @return\t{boolean}\r\n\t\t\t */\r\n\t\t\tisLast: function () {\r\n\t\t\t\treturn (_self.objectData.currentIndex === (_self.objectData.sequenceLength - 1));\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Clones the object for inline elements\r\n\t\t *\r\n\t\t * @param\t{object}\t$object\r\n\t\t * @return\t{object}\t$clone\r\n\t\t */\r\n\t\t_cloneObject: function ($object) {\r\n\t\t\tvar $clone = $object.clone(),\r\n\t\t\t\tobjectId = $object.attr('id');\r\n\r\n\t\t\t// If element is hidden, cache the object and remove\r\n\t\t\tif ($object.is(':hidden')) {\r\n\t\t\t\t_self._cacheObjectData($object);\r\n\t\t\t\t$object.attr('id', _self.settings.idPrefix + 'temp-' + objectId).empty();\r\n\t\t\t} else {\r\n\t\t\t\t// Prevent duplicated id's\r\n\t\t\t\t$clone.removeAttr('id');\r\n\t\t\t}\r\n\r\n\t\t\treturn $clone.show();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Verifies if it is a mobile device\r\n\t\t *\r\n\t\t * @return\t{boolean}\r\n\t\t */\r\n\t\tisMobileDevice: function () {\r\n\t\t\tvar deviceAgent = navigator.userAgent.toLowerCase(),\r\n\t\t\t\tagentId = deviceAgent.match(_self.settings.mobileMatchExpression);\r\n\r\n\t\t\treturn agentId ? true : false;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Verifies if css transitions are supported\r\n\t\t *\r\n\t\t * @return\t{string|boolean}\tThe transition prefix if supported, else false.\r\n\t\t */\r\n\t\tisTransitionSupported: function () {\r\n\t\t\tvar body = _self.objects.body.get(0),\r\n\t\t\t\tisTransitionSupported = false,\r\n\t\t\t\ttransitionMapping = {\r\n\t\t\t\t\t'transition': '',\r\n\t\t\t\t\t'WebkitTransition': '-webkit-',\r\n\t\t\t\t\t'MozTransition': '-moz-',\r\n\t\t\t\t\t'OTransition': '-o-',\r\n\t\t\t\t\t'MsTransition': '-ms-'\r\n\t\t\t\t};\r\n\r\n\t\t\tfor (var key in transitionMapping) {\r\n\t\t\t\tif (transitionMapping.hasOwnProperty(key) && key in body.style) {\r\n\t\t\t\t\t_self.support.transition = transitionMapping[key];\r\n\t\t\t\t\tisTransitionSupported = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn isTransitionSupported;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Transition types\r\n\t\t *\r\n\t\t */\r\n\t\ttransition: {\r\n\t\t\t/**\r\n\t\t\t * Returns the correct transition type according to the status of interaction.\r\n\t\t\t *\r\n\t\t\t * @return\t{string}\tTransition type\r\n\t\t\t */\r\n\t\t\tin: function () {\r\n\t\t\t\tif (_self.settings.transitionOpen && !_self.cache.firstOpened) {\r\n\t\t\t\t\treturn _self.settings.transitionOpen;\r\n\t\t\t\t}\r\n\t\t\t\treturn _self.settings.transitionIn;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Fades in/out the object\r\n\t\t\t *\r\n\t\t\t * @param\t{object}\t$object\r\n\t\t\t * @param\t{string}\ttype\r\n\t\t\t * @param\t{number}\tspeed\r\n\t\t\t * @param\t{number}\topacity\r\n\t\t\t * @param\t{function}\tcallback\r\n\t\t\t * @return\t{void}\t\tAnimates an object\r\n\t\t\t */\r\n\t\t\tfade: function ($object, type, speed, opacity, callback) {\r\n\t\t\t\tvar isInTransition = type === 'in',\r\n\t\t\t\t\tstartTransition = {},\r\n\t\t\t\t\tstartOpacity = $object.css('opacity'),\r\n\t\t\t\t\tendTransition = {},\r\n\t\t\t\t\tendOpacity = opacity ? opacity: isInTransition ? 1 : 0;\r\n\r\n\t\t\t\tif (!_self.isOpen && isInTransition) return;\r\n\r\n\t\t\t\tstartTransition['opacity'] = startOpacity;\r\n\t\t\t\tendTransition['opacity'] = endOpacity;\r\n\r\n\t\t\t\t$object.css(_self.support.transition + 'transition', 'none');\r\n\t\t\t\t$object.css(startTransition).show();\r\n\r\n\t\t\t\t// Css transition\r\n\t\t\t\tif (_self.support.transitions) {\r\n\t\t\t\t\tendTransition[_self.support.transition + 'transition'] = speed + 'ms ease';\r\n\r\n\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t$object.css(endTransition);\r\n\r\n\t\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t\t$object.css(_self.support.transition + 'transition', '');\r\n\r\n\t\t\t\t\t\t\tif (callback && (_self.isOpen || !isInTransition)) {\r\n\t\t\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, speed);\r\n\t\t\t\t\t}, 15);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Fallback to js transition\r\n\t\t\t\t\t$object.stop();\r\n\t\t\t\t\t$object.animate(endTransition, speed, callback);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Scrolls in/out the object\r\n\t\t\t *\r\n\t\t\t * @param\t{object}\t$object\r\n\t\t\t * @param\t{string}\ttype\r\n\t\t\t * @param\t{number}\tspeed\r\n\t\t\t * @param\t{function}\tcallback\r\n\t\t\t * @return\t{void}\t\tAnimates an object\r\n\t\t\t */\r\n\t\t\tscroll: function ($object, type, speed, callback) {\r\n\t\t\t\tvar isInTransition = type === 'in',\r\n\t\t\t\t\ttransition = isInTransition ? _self.settings.transitionIn : _self.settings.transitionOut,\r\n\t\t\t\t\tdirection = 'left',\r\n\t\t\t\t\tstartTransition = {},\r\n\t\t\t\t\tstartOpacity = isInTransition ? 0 : 1,\r\n\t\t\t\t\tstartOffset = isInTransition ? '-50%' : '50%',\r\n\t\t\t\t\tendTransition = {},\r\n\t\t\t\t\tendOpacity = isInTransition ? 1 : 0,\r\n\t\t\t\t\tendOffset = isInTransition ? '50%' : '-50%';\r\n\r\n\t\t\t\tif (!_self.isOpen && isInTransition) return;\r\n\r\n\t\t\t\tswitch (transition) {\r\n\t\t\t\t\tcase 'scrollTop':\r\n\t\t\t\t\t\tdirection = 'top';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'scrollRight':\r\n\t\t\t\t\t\tstartOffset = isInTransition ? '150%' : '50%';\r\n\t\t\t\t\t\tendOffset = isInTransition ? '50%' : '150%';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'scrollBottom':\r\n\t\t\t\t\t\tdirection = 'top';\r\n\t\t\t\t\t\tstartOffset = isInTransition ? '150%' : '50%';\r\n\t\t\t\t\t\tendOffset = isInTransition ? '50%' : '150%';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'scrollHorizontal':\r\n\t\t\t\t\t\tstartOffset = isInTransition ? '150%' : '50%';\r\n\t\t\t\t\t\tendOffset = isInTransition ? '50%' : '-50%';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'scrollVertical':\r\n\t\t\t\t\t\tdirection = 'top';\r\n\t\t\t\t\t\tstartOffset = isInTransition ? '-50%' : '50%';\r\n\t\t\t\t\t\tendOffset = isInTransition ? '50%' : '150%';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (_self.cache.action === 'prev') {\r\n\t\t\t\t\tswitch (transition) {\r\n\t\t\t\t\t\tcase 'scrollHorizontal':\r\n\t\t\t\t\t\t\tstartOffset = isInTransition ? '-50%' : '50%';\r\n\t\t\t\t\t\t\tendOffset = isInTransition ? '50%' : '150%';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'scrollVertical':\r\n\t\t\t\t\t\t\tstartOffset = isInTransition ? '150%' : '50%';\r\n\t\t\t\t\t\t\tendOffset = isInTransition ? '50%' : '-50%';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstartTransition['opacity'] = startOpacity;\r\n\t\t\t\tstartTransition[direction] = startOffset;\r\n\r\n\t\t\t\tendTransition['opacity'] = endOpacity;\r\n\t\t\t\tendTransition[direction] = endOffset;\r\n\r\n\t\t\t\t$object.css(_self.support.transition + 'transition', 'none');\r\n\t\t\t\t$object.css(startTransition).show();\r\n\r\n\t\t\t\t// Css transition\r\n\t\t\t\tif (_self.support.transitions) {\r\n\t\t\t\t\tendTransition[_self.support.transition + 'transition'] = speed + 'ms ease';\r\n\r\n\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t$object.css(endTransition);\r\n\r\n\t\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t\t$object.css(_self.support.transition + 'transition', '');\r\n\r\n\t\t\t\t\t\t\tif (callback && (_self.isOpen || !isInTransition)) {\r\n\t\t\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, speed);\r\n\t\t\t\t\t}, 15);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Fallback to js transition\r\n\t\t\t\t\t$object.stop();\r\n\t\t\t\t\t$object.animate(endTransition, speed, callback);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Zooms in/out the object\r\n\t\t\t *\r\n\t\t\t * @param\t{object}\t$object\r\n\t\t\t * @param\t{string}\ttype\r\n\t\t\t * @param\t{number}\tspeed\r\n\t\t\t * @param\t{function}\tcallback\r\n\t\t\t * @return\t{void}\t\tAnimates an object\r\n\t\t\t */\r\n\t\t\tzoom: function ($object, type, speed, callback) {\r\n\t\t\t\tvar isInTransition = type === 'in',\r\n\t\t\t\t\tstartTransition = {},\r\n\t\t\t\t\tstartOpacity = $object.css('opacity'),\r\n\t\t\t\t\tstartScale = isInTransition ? 'scale(0.75)' : 'scale(1)',\r\n\t\t\t\t\tendTransition = {},\r\n\t\t\t\t\tendOpacity = isInTransition ? 1 : 0,\r\n\t\t\t\t\tendScale = isInTransition ? 'scale(1)' : 'scale(0.75)';\r\n\r\n\t\t\t\tif (!_self.isOpen && isInTransition) return;\r\n\r\n\t\t\t\tstartTransition['opacity'] = startOpacity;\r\n\t\t\t\tstartTransition[_self.support.transition + 'transform'] = startScale;\r\n\r\n\t\t\t\tendTransition['opacity'] = endOpacity;\r\n\r\n\t\t\t\t$object.css(_self.support.transition + 'transition', 'none');\r\n\t\t\t\t$object.css(startTransition).show();\r\n\r\n\t\t\t\t// Css transition\r\n\t\t\t\tif (_self.support.transitions) {\r\n\t\t\t\t\tendTransition[_self.support.transition + 'transform'] = endScale;\r\n\t\t\t\t\tendTransition[_self.support.transition + 'transition'] = speed + 'ms ease';\r\n\r\n\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t$object.css(endTransition);\r\n\r\n\t\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\t\t$object.css(_self.support.transition + 'transform', '');\r\n\t\t\t\t\t\t\t$object.css(_self.support.transition + 'transition', '');\r\n\r\n\t\t\t\t\t\t\tif (callback && (_self.isOpen || !isInTransition)) {\r\n\t\t\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, speed);\r\n\t\t\t\t\t}, 15);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Fallback to js transition\r\n\t\t\t\t\t$object.stop();\r\n\t\t\t\t\t$object.animate(endTransition, speed, callback);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Calls all the registered functions of a specific hook\r\n\t\t *\r\n\t\t * @param\t{object}\thooks\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_callHooks: function (hooks) {\r\n\t\t\tif (typeof(hooks) === 'object') {\r\n\t\t\t\t$.each(hooks, function(index, hook) {\r\n\t\t\t\t\tif (typeof(hook) === 'function') {\r\n\t\t\t\t\t\thook.call(_self.origin);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Caches the object data\r\n\t\t *\r\n\t\t * @param\t{object}\t$object\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_cacheObjectData: function ($object) {\r\n\t\t\t$.data($object, 'cache', {\r\n\t\t\t\tid: $object.attr('id'),\r\n\t\t\t\tcontent: $object.html()\r\n\t\t\t});\r\n\r\n\t\t\t_self.cache.originalObject = $object;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Restores the object from cache\r\n\t\t *\r\n\t\t * @return\tvoid\r\n\t\t */\r\n\t\t_restoreObject: function () {\r\n\t\t\tvar $object = $('[id^=\"' + _self.settings.idPrefix + 'temp-\"]');\r\n\r\n\t\t\t$object.attr('id', $.data(_self.cache.originalObject, 'cache').id);\r\n\t\t\t$object.html($.data(_self.cache.originalObject, 'cache').content);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Executes functions for a window resize.\r\n\t\t * It stops an eventual timeout and recalculates dimensions.\r\n\t\t *\r\n\t\t * @param\t{object}\tdimensions\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\tresize: function (event, dimensions) {\r\n\t\t\tif (!_self.isOpen) return;\r\n\r\n\t\t\tif (_self.isSlideshowEnabled()) {\r\n\t\t\t\t_self._stopTimeout();\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof dimensions === 'object' && dimensions !== null) {\r\n\t\t\t\tif (dimensions.width) {\r\n\t\t\t\t\t_self.cache.object.attr(\r\n\t\t\t\t\t\t_self._prefixAttributeName('width'),\r\n\t\t\t\t\t\tdimensions.width\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tif (dimensions.maxWidth) {\r\n\t\t\t\t\t_self.cache.object.attr(\r\n\t\t\t\t\t\t_self._prefixAttributeName('max-width'),\r\n\t\t\t\t\t\tdimensions.maxWidth\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tif (dimensions.height) {\r\n\t\t\t\t\t_self.cache.object.attr(\r\n\t\t\t\t\t\t_self._prefixAttributeName('height'),\r\n\t\t\t\t\t\tdimensions.height\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tif (dimensions.maxHeight) {\r\n\t\t\t\t\t_self.cache.object.attr(\r\n\t\t\t\t\t\t_self._prefixAttributeName('max-height'),\r\n\t\t\t\t\t\tdimensions.maxHeight\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t_self.dimensions = _self.getViewportDimensions();\r\n\t\t\t_self._calculateDimensions(_self.cache.object);\r\n\r\n\t\t\t// Call onResize hook functions\r\n\t\t\t_self._callHooks(_self.settings.onResize);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Watches for any resize interaction and caches the new sizes.\r\n\t\t *\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_watchResizeInteraction: function () {\r\n\t\t\t$(window).resize(_self.resize);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Stop watching any resize interaction related to _self.\r\n\t\t *\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_unwatchResizeInteraction: function () {\r\n\t\t\t$(window).off('resize', _self.resize);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Switches to the fullscreen mode\r\n\t\t *\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_switchToFullScreenMode: function () {\r\n\t\t\t_self.settings.shrinkFactor = 1;\r\n\t\t\t_self.settings.overlayOpacity = 1;\r\n\r\n\t\t\t$('html').addClass(_self.settings.classPrefix + 'fullScreenMode');\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Enters into the lightcase view\r\n\t\t *\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_open: function () {\r\n\t\t\t_self.isOpen = true;\r\n\r\n\t\t\t_self.support.transitions = _self.settings.cssTransitions ? _self.isTransitionSupported() : false;\r\n\t\t\t_self.support.mobileDevice = _self.isMobileDevice();\r\n\r\n\t\t\tif (_self.support.mobileDevice) {\r\n\t\t\t\t$('html').addClass(_self.settings.classPrefix + 'isMobileDevice');\r\n\r\n\t\t\t\tif (_self.settings.fullScreenModeForMobile) {\r\n\t\t\t\t\t_self._switchToFullScreenMode();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!_self.settings.transitionIn) {\r\n\t\t\t\t_self.settings.transitionIn = _self.settings.transition;\r\n\t\t\t}\r\n\t\t\tif (!_self.settings.transitionOut) {\r\n\t\t\t\t_self.settings.transitionOut = _self.settings.transition;\r\n\t\t\t}\r\n\r\n\t\t\tswitch (_self.transition.in()) {\r\n\t\t\t\tcase 'fade':\r\n\t\t\t\tcase 'fadeInline':\r\n\t\t\t\tcase 'elastic':\r\n\t\t\t\tcase 'scrollTop':\r\n\t\t\t\tcase 'scrollRight':\r\n\t\t\t\tcase 'scrollBottom':\r\n\t\t\t\tcase 'scrollLeft':\r\n\t\t\t\tcase 'scrollVertical':\r\n\t\t\t\tcase 'scrollHorizontal':\r\n\t\t\t\t\tif (_self.objects.case.is(':hidden')) {\r\n\t\t\t\t\t\t_self.objects.close.css('opacity', 0);\r\n\t\t\t\t\t\t_self.objects.overlay.css('opacity', 0);\r\n\t\t\t\t\t\t_self.objects.case.css('opacity', 0);\r\n\t\t\t\t\t\t_self.objects.contentInner.css('opacity', 0);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_self.transition.fade(_self.objects.overlay, 'in', _self.settings.speedIn, _self.settings.overlayOpacity, function () {\r\n\t\t\t\t\t\t_self.transition.fade(_self.objects.close, 'in', _self.settings.speedIn);\r\n\t\t\t\t\t\t_self._handleEvents();\r\n\t\t\t\t\t\t_self._processContent();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t_self.transition.fade(_self.objects.overlay, 'in', 0, _self.settings.overlayOpacity, function () {\r\n\t\t\t\t\t\t_self.transition.fade(_self.objects.close, 'in', 0);\r\n\t\t\t\t\t\t_self._handleEvents();\r\n\t\t\t\t\t\t_self._processContent();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\t_self.objects.document.addClass(_self.settings.classPrefix + 'open');\r\n\t\t\t_self.objects.case.attr('aria-hidden', 'false');\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Shows the lightcase by starting the transition\r\n\t\t */\r\n\t\tshow: function () {\r\n\t\t\t// Call onCalculateDimensions hook functions\r\n\t\t\t_self._callHooks(_self.settings.onBeforeCalculateDimensions);\r\n\r\n\t\t\t_self._calculateDimensions(_self.cache.object);\r\n\r\n\t\t\t// Call onAfterCalculateDimensions hook functions\r\n\t\t\t_self._callHooks(_self.settings.onAfterCalculateDimensions);\r\n\r\n\t\t\t_self._startInTransition();\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Escapes from the lightcase view\r\n\t\t *\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\tclose: function () {\r\n\t\t\t_self.isOpen = false;\r\n\r\n\t\t\tif (_self.isSlideshowEnabled()) {\r\n\t\t\t\t_self._stopTimeout();\r\n\t\t\t\t_self.isSlideshowStarted = false;\r\n\t\t\t\t_self.objects.nav.removeClass(_self.settings.classPrefix + 'paused');\r\n\t\t\t}\r\n\r\n\t\t\t_self.objects.loading.hide();\r\n\r\n\t\t\t_self._unbindEvents();\r\n\r\n\t\t\t_self._unwatchResizeInteraction();\r\n\r\n\t\t\t$('html').removeClass(_self.settings.classPrefix + 'open');\r\n\t\t\t_self.objects.case.attr('aria-hidden', 'true');\r\n\r\n\t\t\t_self.objects.nav.children().hide();\r\n\t\t\t_self.objects.close.hide();\r\n\r\n\t\t\t// Call onClose hook functions\r\n\t\t\t_self._callHooks(_self.settings.onClose);\r\n\r\n\t\t\t// Fade out the info at first\r\n\t\t\t_self.transition.fade(_self.objects.info, 'out', 0);\r\n\r\n\t\t\tswitch (_self.settings.transitionClose || _self.settings.transitionOut) {\r\n\t\t\t\tcase 'fade':\r\n\t\t\t\tcase 'fadeInline':\r\n\t\t\t\tcase 'scrollTop':\r\n\t\t\t\tcase 'scrollRight':\r\n\t\t\t\tcase 'scrollBottom':\r\n\t\t\t\tcase 'scrollLeft':\r\n\t\t\t\tcase 'scrollHorizontal':\r\n\t\t\t\tcase 'scrollVertical':\r\n\t\t\t\t\t_self.transition.fade(_self.objects.case, 'out', _self.settings.speedOut, 0, function () {\r\n\t\t\t\t\t\t_self.transition.fade(_self.objects.overlay, 'out', _self.settings.speedOut, 0, function () {\r\n\t\t\t\t\t\t\t_self.cleanup();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'elastic':\r\n\t\t\t\t\t_self.transition.zoom(_self.objects.case, 'out', _self.settings.speedOut, function () {\r\n\t\t\t\t\t\t_self.transition.fade(_self.objects.overlay, 'out', _self.settings.speedOut, 0, function () {\r\n\t\t\t\t\t\t\t_self.cleanup();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t_self.cleanup();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Unbinds all given events\r\n\t\t *\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_unbindEvents: function () {\r\n\t\t\t// Unbind overlay event\r\n\t\t\t_self.objects.overlay.unbind('click');\r\n\r\n\t\t\t// Unbind key events\r\n\t\t\t$(document).unbind('keyup.lightcase');\r\n\r\n\t\t\t// Unbind swipe events\r\n\t\t\t_self.objects.case.unbind('swipeleft').unbind('swiperight');\r\n\r\n\t\t\t// Unbind navigator events\r\n\t\t\t_self.objects.prev.unbind('click');\r\n\t\t\t_self.objects.next.unbind('click');\r\n\t\t\t_self.objects.play.unbind('click');\r\n\t\t\t_self.objects.pause.unbind('click');\r\n\r\n\t\t\t// Unbind close event\r\n\t\t\t_self.objects.close.unbind('click');\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Cleans up the dimensions\r\n\t\t *\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_cleanupDimensions: function () {\r\n\t\t\tvar opacity = _self.objects.contentInner.css('opacity');\r\n\r\n\t\t\t_self.objects.case.css({\r\n\t\t\t\t'width': '',\r\n\t\t\t\t'height': '',\r\n\t\t\t\t'top': '',\r\n\t\t\t\t'left': '',\r\n\t\t\t\t'margin-top': '',\r\n\t\t\t\t'margin-left': ''\r\n\t\t\t});\r\n\r\n\t\t\t_self.objects.contentInner.removeAttr('style').css('opacity', opacity);\r\n\t\t\t_self.objects.contentInner.children().removeAttr('style');\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Cleanup after aborting lightcase\r\n\t\t *\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\tcleanup: function () {\r\n\t\t\t_self._cleanupDimensions();\r\n\r\n\t\t\t_self.objects.loading.hide();\r\n\t\t\t_self.objects.overlay.hide();\r\n\t\t\t_self.objects.case.hide();\r\n\t\t\t_self.objects.prev.hide();\r\n\t\t\t_self.objects.next.hide();\r\n\t\t\t_self.objects.play.hide();\r\n\t\t\t_self.objects.pause.hide();\r\n\r\n\t\t\t_self.objects.document.removeAttr(_self._prefixAttributeName('type'));\r\n\t\t\t_self.objects.nav.removeAttr(_self._prefixAttributeName('ispartofsequence'));\r\n\r\n\t\t\t_self.objects.contentInner.empty().hide();\r\n\t\t\t_self.objects.info.children().empty();\r\n\r\n\t\t\tif (_self.cache.originalObject) {\r\n\t\t\t\t_self._restoreObject();\r\n\t\t\t}\r\n\r\n\t\t\t// Call onCleanup hook functions\r\n\t\t\t_self._callHooks(_self.settings.onCleanup);\r\n\r\n\t\t\t// Restore cache\r\n\t\t\t_self.cache = {};\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Returns the supported match media or undefined if the browser\r\n\t\t * doesn't support match media.\r\n\t\t *\r\n\t\t * @return\t{mixed}\r\n\t\t */\r\n\t\t_matchMedia: function () {\r\n\t\t\treturn window.matchMedia || window.msMatchMedia;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Returns the devicePixelRatio if supported. Else, it simply returns\r\n\t\t * 1 as the default.\r\n\t\t *\r\n\t\t * @return\t{number}\r\n\t\t */\r\n\t\t_devicePixelRatio: function () {\r\n\t\t\treturn window.devicePixelRatio || 1;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Checks if method is public\r\n\t\t *\r\n\t\t * @return\t{boolean}\r\n\t\t */\r\n\t\t_isPublicMethod: function (method) {\r\n\t\t\treturn (typeof _self[method] === 'function' && method.charAt(0) !== '_');\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Exports all public methods to be accessible, callable\r\n\t\t * from global scope.\r\n\t\t *\r\n\t\t * @return\t{void}\r\n\t\t */\r\n\t\t_export: function () {\r\n\t\t\twindow.lightcase = {};\r\n\r\n\t\t\t$.each(_self, function (property) {\r\n\t\t\t\tif (_self._isPublicMethod(property)) {\r\n\t\t\t\t\tlightcase[property] = _self[property];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t_self._export();\r\n\r\n\t$.fn.lightcase = function (method) {\r\n\t\t// Method calling logic (only public methods are applied)\r\n\t\tif (_self._isPublicMethod(method)) {\r\n\t\t\treturn _self[method].apply(this, Array.prototype.slice.call(arguments, 1));\r\n\t\t} else if (typeof method === 'object' || !method) {\r\n\t\t\treturn _self.init.apply(this, arguments);\r\n\t\t} else {\r\n\t\t\t$.error('Method ' + method + ' does not exist on jQuery.lightcase');\r\n\t\t}\r\n\t};\r\n})(jQuery);"],"names":["$","_self","cache","support","objects","init","options","this","each","unbind","bind","event","preventDefault","lightcase","start","origin","settings","extend","idPrefix","classPrefix","attrPrefix","transition","transitionOpen","transitionClose","transitionIn","transitionOut","cssTransitions","speedIn","speedOut","width","height","maxWidth","maxHeight","forceWidth","forceHeight","liveResize","fullScreenModeForMobile","mobileMatchExpression","disableShrink","fixedRatio","shrinkFactor","overlayOpacity","slideshow","slideshowAutoStart","breakBeforeShow","timeout","swipe","useKeys","useCategories","useAsCollection","navigateEndless","closeOnOverlayClick","title","caption","showTitle","showCaption","showSequenceInfo","inline","ajax","type","dataType","data","iframe","frameborder","flash","wmode","video","poster","preload","controls","autobuffer","autoplay","loop","attr","href","typeMapping","image","errorMessage","labels","sequenceInfo.of","close","navigator.prev","navigator.next","navigator.play","navigator.pause","markup","body","append","overlay","loading","case","after","nav","prev","hide","next","play","pause","content","info","contentInner","sequenceInfo","onInit","onStart","onBeforeCalculateDimensions","onAfterCalculateDimensions","onBeforeShow","onFinish","onResize","onClose","onCleanup","document","_callHooks","objectData","_setObjectData","_addElements","_open","dimensions","getViewportDimensions","get","name","getObjectData","object","$object","_prefixAttributeName","children","url","_determineUrl","requestType","requestData","requestDataType","rel","_determineAttributeSelector","_verifyDataType","isPartOfSequence","_isPartOfSequence","isPartOfSequenceWithSlideshow","currentIndex","index","sequenceLength","length","prevIndex","nextIndex","_determineLinkTarget","categories","$origin","selector","split","category","dataUrl","_verifyDataUrl","density","supportLevel","src","createElement","videoType","_getFileUrlSuffix","canPlayType","_devicePixelRatio","_matchMedia","matches","_normalizeUrl","srcExp","map","str","trim","forEach","i","value","substring","lastChar","intVal","parseInt","floatVal","parseFloat","test","isNaN","expression","getSimilarLinks","RegExp","isSlideshowEnabled","_loadContent","originalObject","_restoreObject","_createObject","Image","alt","html","_cloneObject","_addObject","_loadObject","_loading","show","empty","undefined","_showContent","error","success","textStatus","jqXHR","getResponseHeader","errorThrown","find","on","_calculateDimensions","_cleanupDimensions","ratio","objectWidth","objectHeight","windowWidth","windowHeight","differenceWidthAsPercent","differenceHeightAsPercent","e","_adjustDimensions","css","max-width","max-height","outerWidth","outerHeight","margin-top","margin-left","process","addClass","removeClass","window","innerWidth","innerHeight","indexOf","toString","exec","toLowerCase","key","hasOwnProperty","suffixArr","suffix","regexp","substr","_startInTransition","in","scroll","fade","zoom","isBusy","firstOpened","setTimeout","_processContent","is","_handleEvents","_unbindEvents","not","isSlideshowStarted","hasClass","_stopTimeout","_startTimeout","_watchResizeInteraction","click","_addKeyEvents","_setNavigation","item","isFirst","action","isLast","isPlainObject","special","swipeleft","swiperight","keyCode","clearTimeout","$links","items","eq","prevItem","isFirstOpened","$clone","clone","objectId","_cacheObjectData","removeAttr","isMobileDevice","navigator","userAgent","match","isTransitionSupported","transitionMapping","WebkitTransition","MozTransition","OTransition","MsTransition","style","speed","opacity","callback","isInTransition","startTransition","startOpacity","endTransition","endOpacity","isOpen","transitions","stop","animate","direction","startOffset","endOffset","startScale","endScale","hooks","hook","call","id","resize","_unwatchResizeInteraction","off","_switchToFullScreenMode","mobileDevice","cleanup","top","left","matchMedia","msMatchMedia","devicePixelRatio","_isPublicMethod","method","charAt","_export","property","fn","apply","Array","prototype","slice","arguments","jQuery"],"mappings":"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"}